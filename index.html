<!DOCTYPE html>
<html>
    <head>
        <title>Seismic Eruptions</title>
        <meta http-equiv='Content-Type' content='text/html, charset=utf-8'/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densityDpi=device-dpi"/>
		<link rel="stylesheet" href="//code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
        <link rel="stylesheet" href="http://leafletjs.com/dist/leaflet.css" />
		<link rel="stylesheet" href="Draw/leaflet.draw.css" />
        <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
        <script src="http://leafletjs.com/dist/leaflet.js"></script>
		<style>
			.ui-content {
				position: absolute;
				top: 40px;
				right: 0;
				bottom: 0;
				left: 0;
				padding: 0;
			}
			#map {
				height: 100%;
				position:absolute;
				top:0;
				bottom:0;
				left:0;
				right:0;
				margin: 0;
				padding: 0;
			}
		</style>
    </head>
    <body>
        <div data-role="page" id="index">
            <div data-theme="a" data-role="header">
                <h1>Seismic Eruptions</h1>
				<a href="#options" data-icon="bars" data-iconpos="notext">Options</a>
				<a href="#settings" data-icon="gear" data-iconpos="notext">Settings</a>
            </div>
            <div data-role="panel" data-display="overlay" id="options">
				<div id="info" class="ui-bar ui-body-a"></div>
			</div>
			 <div data-role="panel" data-position="right" data-display="overlay" data-theme="a" id="settings">
				<form>
					<label>
						<input type="checkbox" name="plates" id="plates">Display plate boundaries
					</label>
					<a href="#settings" data-rel="close" data-role="button" id="drawingTool">Draw Cross-section for 3D view</a>
				</form>
			</div>
            <div data-role="content">
                <div id="map"></div>
				<div class="ui-bar ui-body-a" style="width:100%;bottom:0px;left:0px;position:absolute"  id="playback">
					<div class="ui-grid-d" id="playcontrols">
						<div class="ui-block-a"><a class="ui-btn-inline" data-iconpos="notext" data-role="button" data-icon="arrow-r" id="play">PLAY</a></div>
						<div class="ui-block-b"><a class="ui-btn-inline" data-iconpos="notext" data-role="button" data-icon="arrow-d" id="pause">PAUSE</a></div>
						<div class="ui-block-c"><a class="ui-btn-inline" data-iconpos="notext" data-role="button" data-icon="plus" id="speedup">SPEED UP</a></div>
						<div class="ui-block-d"><a class="ui-btn-inline" data-iconpos="notext" data-role="button" data-icon="minus" id="speeddown">SPEED DOWN</a></div>
					</div>
					<div class="ui-grid-a">
						<div class="ui-block-a"><div id="slider" style="height:10px;width:90%"></div></div>
						<div class="ui-block-b" id="date"></div>
					</div>
				</div>
				<div class="ui-bar ui-body-a" style="width:100%;bottom:0px;position:absolute;display:none" id="crosssection">
					<button class="ui-btn ui-btn-inline" onclick="render()">RENDER</button>
				</div>
			</div>
			
        </div>
		<script>
			function getURLParameter(name) {
				return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null
			}
		</script>
		
		<script src="KML.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>
		<script src="rainbowvis.js"></script>
		<script src="Draw/editedLibs/src/ext/TouchEvents.js"></script>
		<script src="Draw/editedLibs/src/Leaflet.draw.js"></script>
		<script src="Draw/editedLibs/src/draw/handler/Draw.Feature.js"></script>
		<script src="Draw/editedLibs/src/draw/handler/latlonTo3D.js"></script>
	
		<script src="Draw/editedLibs/src/ext/GeometryUtil.js"></script>
		<script src="Draw/editedLibs/src/ext/LatLngUtil.js"></script>
		<script src="Draw/editedLibs/src/ext/LineUtil.Intersect.js"></script>
		<script src="Draw/editedLibs/src/ext/Polygon.Intersect.js"></script>
		<script src="Draw/editedLibs/src/ext/Polyline.Intersect.js"></script>
		<script src="Draw/editedLibs/src/Control.Draw.js"></script>
		<script src="Draw/editedLibs/src/Tooltip.js"></script>
		<script src="Draw/editedLibs/src/Toolbar.js"></script>
		<script src="Draw/editedLibs/src/draw/DrawToolbar.js"></script>
		<script src="Draw/editedLibs/src/edit/EditToolbar.js"></script>
		<script src="Draw/editedLibs/src/edit/handler/EditToolbar.Edit.js"></script>
		<script src="Draw/editedLibs/src/edit/handler/EditToolbar.Delete.js"></script>
		<script src="Draw/editedLibs/src/edit/handler/Edit.CrossSection.js"></script>
	
		<script>
			function render(){
				window.open("http://gizmoabhinav.github.io/Seismic-Eruptions/3D/index.html?x1="+toLon(y1)+"&y1="+toLat(x1)+"&x2="+toLon(y2)+"&y2="+toLat(x2)+"&x3="+toLon(y3)+"&y3="+toLat(x3)+"&x4="+toLon(y4)+"&y4="+toLat(x4)+"&mag="+mag+"&startdate="+startdate+"&enddate="+enddate);
			}
		</script>
		<script src="Draw/editedLibs/src/draw/handler/Draw.CrossSection.js"></script>
		<script src="map.js"></script>
    </body>
</html>   